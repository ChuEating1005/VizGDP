(function(){"use strict";var t={6360:function(t,e,a){var n=a(5130),o=a(6768);function r(t,e,a,n,r,i){const l=(0,o.g2)("BarChartRace"),c=(0,o.g2)("ChoroplethMap");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.bF)(c)],64)}const i={class:"flourish-embed flourish-bar-chart-race","data-src":"visualisation/20144600"};function l(t,e,a,n,r,l){return(0,o.uX)(),(0,o.CE)("div",i,e[0]||(e[0]=[(0,o.Lk)("noscript",null,[(0,o.Lk)("img",{src:"https://public.flourish.studio/visualisation/20144600/thumbnail",width:"100%",alt:"bar-chart-race visualization"})],-1)]))}var c={mounted(){const t=document.createElement("script");t.src="https://public.flourish.studio/resources/embed.js",t.async=!0,document.body.appendChild(t)}},s=a(1241);const d=(0,s.A)(c,[["render",l]]);var p=d;const u={class:"flex flex-col"};var v={__name:"BarChartRace",setup(t){return(t,e)=>((0,o.uX)(),(0,o.CE)("div",u,[e[0]||(e[0]=(0,o.Lk)("h1",{class:"text-2xl font-bold text-center"},"Bar Chart Race",-1)),(0,o.bF)(p)]))}};const f=v;var h=f;function g(t,e,a,n,r,i){return(0,o.uX)(),(0,o.CE)("div",null,e[0]||(e[0]=[(0,o.Fv)('<h1>Interactive GDP per Capita Map</h1><svg id="map" width="1200" height="600"></svg><div id="regionSelectorContainer"><label for="regionSelector">Select Region:</label><select id="regionSelector"><option value="world">World</option><option value="africa">Africa</option><option value="asia">Asia</option><option value="europe">Europe</option><option value="northAmerica">North America</option><option value="southAmerica">South America</option><option value="oceania">Oceania</option></select></div><div id="controls"><button id="playButton">Play</button><input type="range" id="yearSlider" min="1960" max="2023" value="2010" step="1"><span id="yearLabel">2010</span></div><div id="legend"></div><div id="tooltip" class="tooltip" style="opacity:0;"></div>',6)]))}a(8992),a(4520),a(1454);var m=a(5163),y={mounted(){const t=1200,e=600;let a="world";const n=m.Ltv("#yearSlider"),o=m.Ltv("#yearLabel"),r=m.Ltv("#tooltip"),i=m.bAh().scale(150).translate([t/2,e/2]),l=m.zFW().projection(i),c=m.c3b().domain([-1,0,1e3,5e3,1e4,2e4,5e4]).range(["#cccccc","#f2f2f2","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#004529"]),s=[["No data",-1],["$0",0],["$1,000",1e3],["$5,000",5e3],["$10,000",1e4],["$20,000",2e4],["$50,000+",5e4]],d=m.Ltv("#legend"),p=d.append("div").style("display","flex").style("align-items","flex-start").style("margin-top","20px");function u(t){g.selectAll("path").attr("class",(e=>{const a=h.get(+n.property("value")).get(e.id);if("No data"===t)return void 0===a?"country-highlight":"country dimmed";{const[e,n]=v(t);return a>=e&&a<n?"country-highlight":"country dimmed"}}))}function v(t){switch(t){case 0:return[0,1e3];case 1e3:return[1e3,5e3];case 5e3:return[5e3,1e4];case 1e4:return[1e4,2e4];case 2e4:return[2e4,5e4];case 5e4:return[5e4,1/0];default:return[-1/0,1/0]}}s.forEach(((t,e)=>{const a=p.append("div").attr("class","legend-item").on("click",(function(){const e=m.Ltv(this).classed("selected");p.selectAll(".legend-item").classed("selected",!1),g.selectAll("path").classed("dimmed",!1),e||(m.Ltv(this).classed("selected",!0),u("No data"===t[0]?t[0]:t[1]))}));a.append("div").attr("class","legend-label").text(t[0]),a.append("div").attr("class","legend-bar").style("background","No data"===t[0]?"#cccccc":c(t[1])),e===s.length-1&&a.append("div").attr("class","legend-arrow").style("border-left-color",c(t[1])),0===e&&p.append("div").attr("class","legend-gap").style("width","20px")}));let f,h=new Map;Promise.all([m.Pq9("assets/worldGeo.json"),m.fu7("assets/globalgdp.csv",(t=>{for(let e=1960;e<=2023;e++)h.has(e)||h.set(e,new Map),h.get(e).set(t["Country Code"],+t[e])}))]).then((t=>{f=t[0],y(2010),n.on("input",(function(){const t=+this.value;o.text(t),y(t)})),m.Ltv("#regionSelector").on("change",(function(){a=this.value,y(+n.property("value"))}))}));const g=m.Ltv("#map");function y(t){const e={world:[[-180,-60],[180,85]],africa:[[-20,-35],[40,35]],asia:[[50,-10],[80,50]],europe:[[-20,30],[50,60]],northAmerica:[[-170,5],[-50,75]],southAmerica:[[-90,-60],[-30,15]],oceania:[[105,-50],[180,10]]},n=e[a];n&&i.fitExtent([[50,50],[1150,550]],{type:"Polygon",coordinates:[[[n[0][0],n[0][1]],[n[0][0],n[1][1]],[n[1][0],n[1][1]],[n[1][0],n[0][1]],[n[0][0],n[0][1]]]]}),g.selectAll("path").data(f.features).join("path").attr("d",l).attr("fill",(e=>{const a=h.get(t).get(e.id);return a?c(a):"#ccc"})).attr("class","country").on("mouseover",(function(e,a){if(!m.Ltv(".legend-item.selected").empty())return;m.Ltv(this).classed("country-highlight",!0),g.selectAll("path").classed("dimmed",!0),m.Ltv(this).classed("dimmed",!1);const n=h.get(t).get(a.id);n&&b(e,a,n)})).on("mousemove",(function(t){r.style("left",t.pageX+10+"px").style("top",t.pageY-10+"px")})).on("mouseout",(function(){m.Ltv(".legend-item.selected").empty()&&(m.Ltv(this).classed("country-highlight",!1),g.selectAll("path").classed("dimmed",!1),x())}))}function b(t,e,a){const o=Array.from(h.keys()).filter((t=>t>=1960&&t<=2023)),i=o.map((t=>h.get(t).get(e.id)||0)),l=+n.property("value"),c=h.get(l).get(e.id)||0;r.html(`\n        <div class="tooltip-title">${e.properties.name}</div>\n        <div class="tooltip-content">\n          <div class="tooltip-year">Year: ${l}</div>\n          <div class="tooltip-gdp">GDP per capita: $${Math.round(a).toLocaleString()}</div>\n          <svg class="tooltip-chart"></svg>\n        </div>\n      `);const s={top:10,right:10,bottom:20,left:40},d=200-s.left-s.right,p=100-s.top-s.bottom,u=m.m4Y().domain([1960,2023]).range([0,d]),v=m.m4Y().domain([0,m.T9B(i)]).range([p,0]),f=m.n8j().x(((t,e)=>u(+o[e]))).y((t=>v(t))).curve(m.nVG),g=r.select("svg").attr("width",d+s.left+s.right).attr("height",p+s.top+s.bottom).append("g").attr("transform",`translate(${s.left},${s.top})`);g.append("g").attr("class","grid").attr("opacity",.1).call(m.V4s(v).tickSize(-d).tickFormat("")),g.append("path").datum(i).attr("fill","none").attr("d",f),g.append("circle").attr("cx",u(l)).attr("cy",v(c)).attr("r",4),g.append("g").attr("class","axis").attr("transform",`translate(0,${p})`).call(m.l78(u).ticks(5).tickFormat(m.GPZ("d"))),g.append("g").attr("class","axis").call(m.V4s(v).ticks(5).tickFormat((t=>`$${m.GPZ("~s")(t)}`))),r.style("opacity",1).style("left",t.pageX+10+"px").style("top",t.pageY-10+"px")}function x(){r.style("opacity",0)}const L=m.Ltv("#playButton");let w,A=!1;L.on("click",(function(){A?(clearInterval(w),L.text("Play")):(w=setInterval((()=>{let t=+n.property("value");t<2023?n.property("value",t+1).dispatch("input"):(clearInterval(w),L.text("Play"))}),1e3),L.text("Pause")),A=!A}))}};const b=(0,s.A)(y,[["render",g]]);var x=b;const L={class:"flex flex-col"};var w={__name:"ChoroplethMap",setup(t){return(t,e)=>((0,o.uX)(),(0,o.CE)("div",L,[e[0]||(e[0]=(0,o.Lk)("h1",{class:"text-2xl font-bold text-center"},"Bar Chart Race",-1)),(0,o.bF)(x)]))}};const A=w;var C=A,k={name:"App",components:{ChoroplethMap:C,BarChartRace:h}};const $=(0,s.A)(k,[["render",r]]);var P=$;(0,n.Ef)(P).mount("#app")}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,r){if(!n){var i=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],r=t[d][2];for(var l=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(l=!1,r<i&&(i=r));if(l){t.splice(d--,1);var s=o();void 0!==s&&(e=s)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[n,o,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,r,i=n[0],l=n[1],c=n[2],s=0;if(i.some((function(e){return 0!==t[e]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(c)var d=c(a)}for(e&&e(n);s<i.length;s++)r=i[s],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},n=self["webpackChunkdv"]=self["webpackChunkdv"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(6360)}));n=a.O(n)})();
//# sourceMappingURL=app.2a2bb1e4.js.map